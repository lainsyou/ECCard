(function(e){function t(t){for(var a,r,l=t[0],s=t[1],c=t[2],h=0,u=[];h<l.length;h++)r=l[h],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],a=!0,l=1;l<o.length;l++){var s=o[l];0!==i[s]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=o[0]))}return e}var a={},i={app:0},n=[];function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=a,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=s;n.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"0833":function(e,t,o){},"0bca":function(e,t,o){},"2ed6":function(e,t,o){"use strict";o("b0f0")},6625:function(e,t,o){"use strict";o("82be")},"7faf":function(e,t,o){"use strict";o("b8ff")},"80a2":function(e,t,o){"use strict";o("0bca")},"82be":function(e,t,o){},af82:function(e,t,o){"use strict";o("0833")},b0f0:function(e,t,o){},b8ff:function(e,t,o){},cd49:function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("2b0e"),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",{attrs:{id:"app"}},[o("v-container",{attrs:{id:"container",fluid:""}},[o("v-app-bar",{attrs:{color:"deep-purple",dark:"",dense:""}},[o("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!0}}}),o("v-toolbar-title",[e._v("ECオーナーカード produced by あきらとぅ〜ん(@Akira_Yasai)")]),o("v-spacer"),o("v-btn",{attrs:{icon:""},on:{click:e.download}},[o("v-icon",[e._v("mdi-download")]),e._v("保存 ")],1)],1),o("v-navigation-drawer",{attrs:{color:"deep-purple",absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[o("v-list",{attrs:{nav:"",dense:""}},[o("v-subheader",{staticClass:"white--text"},[e._v("デザイン選択")]),o("v-list-item-group",{model:{value:e.item,callback:function(t){e.item=t},expression:"item"}},[o("v-list-item",{attrs:{to:{name:"Blue"}}},[o("v-list-item-icon",[0==e.item?o("v-icon",{attrs:{color:"white"}},[e._v("mdi-check-circle-outline")]):o("v-icon",{attrs:{color:"white"}},[e._v("mdi-checkbox-blank-circle-outline")])],1),o("v-list-item-content",{staticClass:"white--text"},[e._v("Blue")])],1),o("v-list-item",{attrs:{to:{name:"Pink"}}},[o("v-list-item-icon",[1==e.item?o("v-icon",{attrs:{color:"white"}},[e._v("mdi-check-circle-outline")]):o("v-icon",{attrs:{color:"white"}},[e._v("mdi-checkbox-blank-circle-outline")])],1),o("v-list-item-content",{staticClass:"white--text"},[e._v("Pink")])],1),o("v-list-item",{attrs:{to:{name:"Red"}}},[o("v-list-item-icon",[2==e.item?o("v-icon",{attrs:{color:"white"}},[e._v("mdi-check-circle-outline")]):o("v-icon",{attrs:{color:"white"}},[e._v("mdi-checkbox-blank-circle-outline")])],1),o("v-list-item-content",{staticClass:"white--text"},[e._v("Red")])],1),o("v-list-item",{attrs:{to:{name:"Gold"}}},[o("v-list-item-icon",[3==e.item?o("v-icon",{attrs:{color:"white"}},[e._v("mdi-check-circle-outline")]):o("v-icon",{attrs:{color:"white"}},[e._v("mdi-checkbox-blank-circle-outline")])],1),o("v-list-item-content",{staticClass:"white--text"},[e._v("Gold")])],1),o("v-list-item",{attrs:{to:{name:"RedAnime"}}},[o("v-list-item-icon",[4==e.item?o("v-icon",{attrs:{color:"white"}},[e._v("mdi-check-circle-outline")]):o("v-icon",{attrs:{color:"white"}},[e._v("mdi-checkbox-blank-circle-outline")])],1),o("v-list-item-content",{staticClass:"white--text"},[e._v("テスト")])],1)],1),o("v-divider"),o("v-subheader",{staticClass:"white--text"},[e._v("連絡先")]),o("v-list-item",{attrs:{href:"https://twitter.com/Akira_Yasai"}},[o("v-list-item-icon",[o("v-icon",{attrs:{color:"white"}},[e._v("mdi-twitter")])],1),o("v-list-item-content",{staticClass:"white--text"},[e._v("あきらとぅ～ん")])],1),o("v-list-item",{attrs:{href:"https://twitter.com/lainsyou"}},[o("v-list-item-icon",[o("v-icon",{attrs:{color:"white"}},[e._v("mdi-twitter")])],1),o("v-list-item-content",{staticClass:"white--text"},[e._v("不具合報告")])],1),o("v-divider"),o("v-subheader",{staticClass:"white--text"},[e._v("更新日")]),o("v-list-item",[o("v-list-item-content",{staticClass:"white--text"},[e._v("2021/01/25")])],1)],1)],1),o("v-main",[o("router-view",{ref:"child"})],1)],1)],1)},n=[],r=o("d4ec"),l=o("bee2"),s=o("262e"),c=o("2caf"),d=o("9ab4"),h=o("60a3"),u=function(e){Object(s["a"])(o,e);var t=Object(c["a"])(o);function o(){var e;return Object(r["a"])(this,o),e=t.apply(this,arguments),e.drawer=!1,e.item=-1,e}return Object(l["a"])(o,[{key:"mounted",value:function(){this.item=-1,this.$router.push({name:"Home"}).catch((function(){console.log("")}))}},{key:"download",value:function(){console.log("download"),this.$router.app.$emit("download")}}]),o}(h["b"]);u=Object(d["a"])([Object(h["a"])({components:{}})],u);var p=u,m=p,g=(o("7faf"),o("2877")),f=o("6544"),v=o.n(f),w=o("7496"),C=o("40dc"),b=o("5bc1"),y=o("8336"),x=o("a523"),S=o("ce7e"),k=o("132d"),$=o("8860"),I=o("da13"),O=o("5d23"),R=o("1baa"),j=o("34c3"),F=o("f6c4"),_=o("f774"),U=o("2fa4"),D=o("e0c7"),T=o("2a7f"),L=Object(g["a"])(m,i,n,!1,null,null,null),P=L.exports;v()(L,{VApp:w["a"],VAppBar:C["a"],VAppBarNavIcon:b["a"],VBtn:y["a"],VContainer:x["a"],VDivider:S["a"],VIcon:k["a"],VList:$["a"],VListItem:I["a"],VListItemContent:O["a"],VListItemGroup:R["a"],VListItemIcon:j["a"],VMain:F["a"],VNavigationDrawer:_["a"],VSpacer:U["a"],VSubheader:D["a"],VToolbarTitle:T["a"]});var E=o("9483");Object(E["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh."),alert("アップデートがあります。ウィンドウまたはタブを閉じて、URLを開きなおしてください。")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var A=o("8c4f"),V=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("pre",{staticStyle:{"text-align":"left"}},[e._v("\n  ECオーナーカードを作成します。\n  横画面の方が操作しやすいと思います。\n\n  左上の"),o("v-icon",[e._v("mdi-menu")]),e._v("からデザインを選択してください。\n  右上の"),o("v-icon",[e._v("mdi-download")]),e._v("で保存できます。\n  \n  ECオーナーカードは、あきらとぅ～ん様の画像を使用しています。  \n  ")],1)])},q=[],B=function(e){Object(s["a"])(o,e);var t=Object(c["a"])(o);function o(){return Object(r["a"])(this,o),t.apply(this,arguments)}return o}(h["b"]);B=Object(d["a"])([Object(h["a"])({components:{}})],B);var N=B,M=N,z=Object(g["a"])(M,V,q,!1,null,null,null),G=z.exports;v()(z,{VIcon:k["a"]});var H=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("canvas",{attrs:{id:"base",width:"700px",height:"400ox"}}),o("canvas",{attrs:{id:"face1",width:"150px",height:"150ox"}}),o("canvas",{attrs:{id:"face2",width:"150px",height:"150ox"}}),o("div",{attrs:{id:"owner"}},[o("v-text-field",{staticClass:"owner-field",style:{color:e.ownerColor},attrs:{placeholder:"Owner","hide-details":"",color:e.ownerColor},model:{value:e.owner,callback:function(t){e.owner=t},expression:"owner"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.ownerColor,expression:"ownerColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.ownerColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.ownerColor=t.target.value)}}})])],2)],1),o("div",{attrs:{id:"name"}},[o("v-text-field",{staticClass:"name-field",style:{color:e.nameColor},attrs:{placeholder:"Name","hide-details":"",color:e.nameColor},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.nameColor,expression:"nameColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.nameColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.nameColor=t.target.value)}}})])],2)],1),o("div",{attrs:{id:"code"}},[o("v-text-field",{staticClass:"code-field",style:{color:e.codeColor},attrs:{placeholder:"Code","hide-details":"",color:e.codeColor},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.codeColor,expression:"codeColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.codeColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.codeColor=t.target.value)}}})])],2)],1),o("div",{attrs:{id:"message"}},[o("v-textarea",{staticClass:"message-field",style:{color:e.messageColor,fontSize:e.messageFontSize+"px"},attrs:{"hide-details":"",color:e.messageColor},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.messageColor,expression:"messageColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.messageColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.messageColor=t.target.value)}}})])],2),o("input",{directives:[{name:"model",rawName:"v-model",value:e.messageFontSize,expression:"messageFontSize"}],staticStyle:{position:"absolute",top:"20px",left:"240px",width:"35px",height:"25px",margin:"0",padding:"0"},attrs:{type:"number",min:"8",max:"48",step:"1"},domProps:{value:e.messageFontSize},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.messageFontSize=t.target.value)}}})],1),o("v-btn",{staticStyle:{top:"175px",left:"392px"},attrs:{icon:"",absolute:""},on:{click:function(t){return e.opneFile("#face1")}}},[o("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),o("v-btn",{staticStyle:{top:"175px",left:"567px"},attrs:{icon:"",absolute:""},on:{click:function(t){return e.opneFile("#face2")}}},[o("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),o("CropDialog",{ref:"cropDialog1"}),o("CropDialog",{ref:"cropDialog2"})],1)},W=[],J=(o("b0c0"),o("d3b7"),o("ac1f"),o("3ca3"),o("466d"),o("5319"),o("1276"),o("5cc6"),o("9a8c"),o("a975"),o("735e"),o("c1ac"),o("d139"),o("3a7b"),o("d5d6"),o("82f8"),o("e91f"),o("60bd"),o("5f96"),o("3280"),o("3fcc"),o("ca91"),o("25a1"),o("cd26"),o("3c5d"),o("2954"),o("649e"),o("219c"),o("170b"),o("b39a"),o("72f7"),o("ddb0"),o("2b3d"),o("b85c")),Y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{"max-width":e.options.width,fullscreen:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-card",{staticClass:"px-2 pt-2"},[o("v-card-actions",[o("span",{staticStyle:{"font-size":"x-small"}},[e._v("※不具合で一度選択すると画像変更不可。"),o("br"),e._v("一度、他のデザインに変更するといける。")]),o("v-spacer"),o("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.options.cancel,expression:"options.cancel"}],attrs:{color:"primary",dark:"",width:"120px"},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v(e._s(e.options.cancel))]),o("v-btn",{attrs:{color:"primary",dark:"",width:"120px"},nativeOn:{click:function(t){return e.agree(t)}}},[e._v(e._s(e.options.agree))])],1),o("vue-cropper",{ref:"cropper",attrs:{src:e.imageUri,aspectRatio:1}})],1)],1)},K=[],Q=o("95c3"),X=o.n(Q),Z=(o("6107"),function(e){Object(s["a"])(o,e);var t=Object(c["a"])(o);function o(){var e;return Object(r["a"])(this,o),e=t.apply(this,arguments),e.dialog=!1,e.options={},e.imageUri="",e}return Object(l["a"])(o,[{key:"isShow",value:function(){return this.dialog}},{key:"show",value:function(e){return this.showOptions(null,e)}},{key:"showOptions",value:function(e,t){var o=this;return this.options={color:"primary",width:800,agree:"OK",cancel:"キャンセル"},this.imageUri=window.URL.createObjectURL(t),this.dialog=!0,this.options=Object.assign(this.options,e),new Promise((function(e,t){o.resolve=e,o.reject=t}))}},{key:"agree",value:function(){for(var e=this.$refs.cropper,t=e.getCroppedCanvas({width:150,height:150}),o=e.getCropBoxData(),a=t.toDataURL("image/png"),i=atob(a.replace(/^.*,/,"")),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);var l=new Blob([n.buffer],{type:"image/png"});this.resolve({result:!0,data:o,url:window.URL.createObjectURL(l)}),this.dialog=!1}},{key:"cancel",value:function(){this.resolve({result:!1}),this.dialog=!1}}]),o}(h["b"]));Z=Object(d["a"])([Object(h["a"])({components:{VueCropper:X.a}})],Z);var ee=Z,te=ee,oe=o("b0af"),ae=o("99d9"),ie=o("169a"),ne=Object(g["a"])(te,Y,K,!1,null,null,null),re=ne.exports;v()(ne,{VBtn:y["a"],VCard:oe["a"],VCardActions:ae["a"],VDialog:ie["a"],VSpacer:U["a"]});var le=function(e){Object(s["a"])(o,e);var t=Object(c["a"])(o);function o(){var e;return Object(r["a"])(this,o),e=t.apply(this,arguments),e.uploadTarget="",e.baseUrl="/ECCard/img/EC_000B.png",e.owner="",e.name="",e.code="",e.message="",e.ownerColor="black",e.nameColor="black",e.codeColor="black",e.messageColor="black",e.messageFontSize=20,e}return Object(l["a"])(o,[{key:"changeStyle",value:function(){this.$el.querySelector(".theme--light.v-input.owner-field input").style.color=this.ownerColor,this.$el.querySelector(".theme--light.v-input.name-field input").style.color=this.nameColor,this.$el.querySelector(".theme--light.v-input.code-field input").style.color=this.codeColor,this.$el.querySelector(".theme--light.v-input.message-field textarea").style.color=this.messageColor,this.$el.querySelector(".theme--light.v-input.message-field textarea").style.lineHeight=this.messageFontSize+"px"}},{key:"mounted",value:function(){this.base=this.$el.querySelector("#base"),this.face1=this.$el.querySelector("#face1"),this.face2=this.$el.querySelector("#face2"),this.setBaseImage(),this.$router.app.$off("download"),this.$router.app.$on("download",this.download),this.owner=this.$store.state.owner,this.name=this.$store.state.name,this.code=this.$store.state.code,this.message=this.$store.state.message}},{key:"setBaseImage",value:function(){var e=this,t=this.base.getContext("2d"),o=new Image;o.src=this.baseUrl,o.onload=function(){null===t||void 0===t||t.clearRect(0,0,e.base.width,e.base.height),null===t||void 0===t||t.drawImage(o,0,0,e.base.width,e.base.height)}}},{key:"opneFile",value:function(e){this.uploadTarget=e;var t=document.createElement("input");t.type="file",t.multiple=!0,t.addEventListener("change",this.addFile,!1),t.click()}},{key:"addFile",value:function(e){var t,o=e.target,a=o.files,i=Object(J["a"])(a);try{for(i.s();!(t=i.n()).done;){var n=t.value;console.log(n),n.type.match("image.*")&&this.addImageFile(n)}}catch(r){i.e(r)}finally{i.f()}}},{key:"addImageFile",value:function(e){var t=this,o=document.createElement("canvas"),a=o.getContext("2d");if(a){var i=new FileReader;i.onload=function(){var e=i.result;if(e){var n=new Image;n.src=e,n.onload=function(){var e=screen.availWidth,i=.7*screen.availHeight,r=n.width,l=n.height;if(r>e||l>i){var s=e/r,c=i/l,d=Math.min(s,c);r=Math.floor(r*d),l=Math.floor(l*d)}console.log(r),console.log(l),o.width=r,o.height=l,a.clearRect(0,0,o.width,o.height),a.drawImage(n,0,0,o.width,o.height);for(var h=o.toDataURL("image/png"),u=atob(h.replace(/^.*,/,"")),p=new Uint8Array(u.length),m=0;m<u.length;m++)p[m]=u.charCodeAt(m);var g=new Blob([p.buffer],{type:"image/png"}),f=t.$refs.cropDialog1;"#face2"===t.uploadTarget&&(f=t.$refs.cropDialog2),f.show(g),f.show(g).then((function(e){var o=e;if(console.log(o),o.result){var a=t.$el.querySelector(t.uploadTarget),i=new Image;i.src=o.url,i.onload=function(){var e;null===(e=a.getContext("2d"))||void 0===e||e.drawImage(i,0,0,a.width,a.height)}}}))}}else alert("FileReader failed.")},i.readAsDataURL(e)}else alert("CanvasRenderingContext2D unsupported.")}},{key:"download",value:function(){this.$store.dispatch("setOwner",{owner:this.owner}),this.$store.dispatch("setName",{name:this.name}),this.$store.dispatch("setCode",{code:this.code}),this.$store.dispatch("setMessage",{message:this.message});var e=document.createElement("canvas"),t=e.getContext("2d");if(t){e.width=700,e.height=400,t.drawImage(this.base,0,0),t.drawImage(this.face1,335,110),t.drawImage(this.face2,510,110),t.font="bold 20px sans-serif",t.fillStyle=this.ownerColor,t.fillText(this.owner,160,80),t.fillStyle=this.nameColor,t.fillText(this.name,160,115),t.fillStyle=this.codeColor,t.fillText(this.code,160,150),t.font="bold ".concat(this.messageFontSize,"px sans-serif"),t.fillStyle=this.messageColor;var o,a=1,i=Object(J["a"])(this.message.split("\n"));try{for(i.s();!(o=i.n()).done;){var n=o.value;t.fillText(n,30,160+a*this.messageFontSize*1.5),a+=1}}catch(u){i.e(u)}finally{i.f()}for(var r=e.toDataURL("image/png"),l=atob(r.replace(/^.*,/,"")),s=new Uint8Array(l.length),c=0;c<l.length;c++)s[c]=l.charCodeAt(c);var d=new Blob([s.buffer],{type:"image/png"}),h=document.createElement("a");h.href=window.URL.createObjectURL(d),h.download="eccard.png",h.click()}else alert("CanvasRenderingContext2D unsupported.")}},{key:"styles",get:function(){return{"--ownerColor":this.ownerColor,"--nameColor":this.nameColor,"--codeColor":this.codeColor,"--messageColor":this.messageColor,"--messageFontSize":this.messageFontSize}}}]),o}(h["b"]);le=Object(d["a"])([Object(h["a"])({components:{CropDialog:re}})],le);var se=le,ce=se,de=(o("6625"),o("8654")),he=o("a844"),ue=Object(g["a"])(ce,H,W,!1,null,"d3685eb4",null),pe=ue.exports;v()(ue,{VBtn:y["a"],VIcon:k["a"],VTextField:de["a"],VTextarea:he["a"]});var me=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("canvas",{attrs:{id:"base",width:"700px",height:"400ox"}}),o("canvas",{attrs:{id:"face1",width:"150px",height:"150ox"}}),o("canvas",{attrs:{id:"face2",width:"150px",height:"150ox"}}),o("div",{attrs:{id:"owner"}},[o("v-text-field",{staticClass:"owner-field",style:{color:e.ownerColor},attrs:{placeholder:"Owner","hide-details":"",color:e.ownerColor},model:{value:e.owner,callback:function(t){e.owner=t},expression:"owner"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.ownerColor,expression:"ownerColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.ownerColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.ownerColor=t.target.value)}}})])],2)],1),o("div",{attrs:{id:"name"}},[o("v-text-field",{staticClass:"name-field",style:{color:e.nameColor},attrs:{placeholder:"Name","hide-details":"",color:e.nameColor},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.nameColor,expression:"nameColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.nameColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.nameColor=t.target.value)}}})])],2)],1),o("div",{attrs:{id:"code"}},[o("v-text-field",{staticClass:"code-field",style:{color:e.codeColor},attrs:{placeholder:"Code","hide-details":"",color:e.codeColor},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.codeColor,expression:"codeColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.codeColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.codeColor=t.target.value)}}})])],2)],1),o("div",{attrs:{id:"message"}},[o("v-textarea",{staticClass:"message-field",style:{color:e.messageColor,fontSize:e.messageFontSize+"px"},attrs:{"hide-details":"",color:e.messageColor},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.messageColor,expression:"messageColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.messageColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.messageColor=t.target.value)}}})])],2),o("input",{directives:[{name:"model",rawName:"v-model",value:e.messageFontSize,expression:"messageFontSize"}],staticStyle:{position:"absolute",top:"20px",left:"240px",width:"35px",height:"25px",margin:"0",padding:"0"},attrs:{type:"number",min:"8",max:"48",step:"1"},domProps:{value:e.messageFontSize},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.messageFontSize=t.target.value)}}})],1),o("v-btn",{staticStyle:{top:"175px",left:"392px"},attrs:{icon:"",absolute:""},on:{click:function(t){return e.opneFile("#face1")}}},[o("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),o("v-btn",{staticStyle:{top:"175px",left:"567px"},attrs:{icon:"",absolute:""},on:{click:function(t){return e.opneFile("#face2")}}},[o("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),o("CropDialog",{ref:"cropDialog1"}),o("CropDialog",{ref:"cropDialog2"})],1)},ge=[],fe=function(e){Object(s["a"])(o,e);var t=Object(c["a"])(o);function o(){var e;return Object(r["a"])(this,o),e=t.apply(this,arguments),e.uploadTarget="",e.baseUrl="/ECCard/img/EC_000P.png",e.owner="",e.name="",e.code="",e.message="",e.ownerColor="black",e.nameColor="black",e.codeColor="black",e.messageColor="black",e.messageFontSize=20,e}return Object(l["a"])(o,[{key:"changeStyle",value:function(){this.$el.querySelector(".theme--light.v-input.owner-field input").style.color=this.ownerColor,this.$el.querySelector(".theme--light.v-input.name-field input").style.color=this.nameColor,this.$el.querySelector(".theme--light.v-input.code-field input").style.color=this.codeColor,this.$el.querySelector(".theme--light.v-input.message-field textarea").style.color=this.messageColor,this.$el.querySelector(".theme--light.v-input.message-field textarea").style.lineHeight=this.messageFontSize+"px"}},{key:"mounted",value:function(){this.base=this.$el.querySelector("#base"),this.face1=this.$el.querySelector("#face1"),this.face2=this.$el.querySelector("#face2"),this.setBaseImage(),this.$router.app.$off("download"),this.$router.app.$on("download",this.download),this.owner=this.$store.state.owner,this.name=this.$store.state.name,this.code=this.$store.state.code,this.message=this.$store.state.message}},{key:"setBaseImage",value:function(){var e=this,t=this.base.getContext("2d"),o=new Image;o.src=this.baseUrl,o.onload=function(){null===t||void 0===t||t.clearRect(0,0,e.base.width,e.base.height),null===t||void 0===t||t.drawImage(o,0,0,e.base.width,e.base.height)}}},{key:"opneFile",value:function(e){this.uploadTarget=e;var t=document.createElement("input");t.type="file",t.multiple=!0,t.addEventListener("change",this.addFile,!1),t.click()}},{key:"addFile",value:function(e){var t,o=e.target,a=o.files,i=Object(J["a"])(a);try{for(i.s();!(t=i.n()).done;){var n=t.value;console.log(n),n.type.match("image.*")&&this.addImageFile(n)}}catch(r){i.e(r)}finally{i.f()}}},{key:"addImageFile",value:function(e){var t=this,o=document.createElement("canvas"),a=o.getContext("2d");if(a){var i=new FileReader;i.onload=function(){var e=i.result;if(e){var n=new Image;n.src=e,n.onload=function(){var e=screen.availWidth,i=.7*screen.availHeight,r=n.width,l=n.height;if(r>e||l>i){var s=e/r,c=i/l,d=Math.min(s,c);r=Math.floor(r*d),l=Math.floor(l*d)}console.log(r),console.log(l),o.width=r,o.height=l,a.clearRect(0,0,o.width,o.height),a.drawImage(n,0,0,o.width,o.height);for(var h=o.toDataURL("image/png"),u=atob(h.replace(/^.*,/,"")),p=new Uint8Array(u.length),m=0;m<u.length;m++)p[m]=u.charCodeAt(m);var g=new Blob([p.buffer],{type:"image/png"}),f=t.$refs.cropDialog1;"#face2"===t.uploadTarget&&(f=t.$refs.cropDialog2),f.show(g),f.show(g).then((function(e){var o=e;if(console.log(o),o.result){var a=t.$el.querySelector(t.uploadTarget),i=new Image;i.src=o.url,i.onload=function(){var e;null===(e=a.getContext("2d"))||void 0===e||e.drawImage(i,0,0,a.width,a.height)}}}))}}else alert("FileReader failed.")},i.readAsDataURL(e)}else alert("CanvasRenderingContext2D unsupported.")}},{key:"download",value:function(){this.$store.dispatch("setOwner",{owner:this.owner}),this.$store.dispatch("setName",{name:this.name}),this.$store.dispatch("setCode",{code:this.code}),this.$store.dispatch("setMessage",{message:this.message});var e=document.createElement("canvas"),t=e.getContext("2d");if(t){e.width=700,e.height=400,t.drawImage(this.base,0,0),t.drawImage(this.face1,335,110),t.drawImage(this.face2,510,110),t.font="bold 20px sans-serif",t.fillStyle=this.ownerColor,t.fillText(this.owner,160,80),t.fillStyle=this.nameColor,t.fillText(this.name,160,115),t.fillStyle=this.codeColor,t.fillText(this.code,160,150),t.font="bold ".concat(this.messageFontSize,"px sans-serif"),t.fillStyle=this.messageColor;var o,a=1,i=Object(J["a"])(this.message.split("\n"));try{for(i.s();!(o=i.n()).done;){var n=o.value;t.fillText(n,30,160+a*this.messageFontSize*1.5),a+=1}}catch(u){i.e(u)}finally{i.f()}for(var r=e.toDataURL("image/png"),l=atob(r.replace(/^.*,/,"")),s=new Uint8Array(l.length),c=0;c<l.length;c++)s[c]=l.charCodeAt(c);var d=new Blob([s.buffer],{type:"image/png"}),h=document.createElement("a");h.href=window.URL.createObjectURL(d),h.download="eccard.png",h.click()}else alert("CanvasRenderingContext2D unsupported.")}},{key:"styles",get:function(){return{"--ownerColor":this.ownerColor,"--nameColor":this.nameColor,"--codeColor":this.codeColor,"--messageColor":this.messageColor,"--messageFontSize":this.messageFontSize}}}]),o}(h["b"]);fe=Object(d["a"])([Object(h["a"])({components:{CropDialog:re}})],fe);var ve=fe,we=ve,Ce=(o("eecd"),Object(g["a"])(we,me,ge,!1,null,"2731a5d0",null)),be=Ce.exports;v()(Ce,{VBtn:y["a"],VIcon:k["a"],VTextField:de["a"],VTextarea:he["a"]});var ye=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("canvas",{attrs:{id:"base",width:"672px",height:"384ox"}}),o("canvas",{staticStyle:{top:"192px",left:"26px","border-radius":"15px"},attrs:{id:"face1",width:"140px",height:"140ox"}}),o("canvas",{staticStyle:{top:"82px",left:"417px","border-radius":"15px"},attrs:{id:"face2",width:"193px",height:"193ox"}}),o("div",{staticStyle:{width:"155px",top:"205px",left:"185px"},attrs:{id:"owner"}},[o("v-text-field",{staticClass:"owner-field",style:{color:e.ownerColor},attrs:{placeholder:"Owner","hide-details":"",color:e.ownerColor},model:{value:e.owner,callback:function(t){e.owner=t},expression:"owner"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.ownerColor,expression:"ownerColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.ownerColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.ownerColor=t.target.value)}}})])],2)],1),o("div",{staticStyle:{width:"135px",top:"100px",left:"278px"},attrs:{id:"name"}},[o("v-text-field",{staticClass:"name-field",style:{color:e.nameColor},attrs:{placeholder:"Name","hide-details":"",color:e.nameColor},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.nameColor,expression:"nameColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.nameColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.nameColor=t.target.value)}}})])],2)],1),o("div",{staticStyle:{width:"185px",top:"100px",left:"22px"},attrs:{id:"code"}},[o("v-text-field",{staticClass:"code-field",style:{color:e.codeColor},attrs:{placeholder:"Code","hide-details":"",color:e.codeColor},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.codeColor,expression:"codeColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.codeColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.codeColor=t.target.value)}}})])],2)],1),o("v-btn",{staticStyle:{top:"245px",left:"78px"},attrs:{icon:"",absolute:"",color:"white"},on:{click:function(t){return e.opneFile("#face1")}}},[o("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),o("v-btn",{staticStyle:{top:"163px",left:"496px"},attrs:{icon:"",absolute:"",color:"white"},on:{click:function(t){return e.opneFile("#face2")}}},[o("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),o("CropDialog",{ref:"cropDialog1"}),o("CropDialog",{ref:"cropDialog2"})],1)},xe=[],Se=function(e){Object(s["a"])(o,e);var t=Object(c["a"])(o);function o(){var e;return Object(r["a"])(this,o),e=t.apply(this,arguments),e.uploadTarget="",e.baseUrl="/ECCard/img/EC_001.jpg",e.owner="",e.name="",e.code="",e.ownerColor="black",e.nameColor="red",e.codeColor="white",e}return Object(l["a"])(o,[{key:"changeStyle",value:function(){this.$el.querySelector(".theme--light.v-input.owner-field input").style.color=this.ownerColor,this.$el.querySelector(".theme--light.v-input.name-field input").style.color=this.nameColor,this.$el.querySelector(".theme--light.v-input.code-field input").style.color=this.codeColor}},{key:"mounted",value:function(){this.base=this.$el.querySelector("#base"),this.face1=this.$el.querySelector("#face1"),this.face2=this.$el.querySelector("#face2"),this.setBaseImage(),this.$router.app.$off("download"),this.$router.app.$on("download",this.download),this.owner=this.$store.state.owner,this.name=this.$store.state.name,this.code=this.$store.state.code,this.changeStyle()}},{key:"setBaseImage",value:function(){var e=this,t=this.base.getContext("2d"),o=new Image;o.src=this.baseUrl,o.onload=function(){null===t||void 0===t||t.clearRect(0,0,e.base.width,e.base.height),null===t||void 0===t||t.drawImage(o,0,0,e.base.width,e.base.height)}}},{key:"opneFile",value:function(e){this.uploadTarget=e;var t=document.createElement("input");t.type="file",t.multiple=!0,t.addEventListener("change",this.addFile,!1),t.click()}},{key:"addFile",value:function(e){var t,o=e.target,a=o.files,i=Object(J["a"])(a);try{for(i.s();!(t=i.n()).done;){var n=t.value;console.log(n),n.type.match("image.*")&&this.addImageFile(n)}}catch(r){i.e(r)}finally{i.f()}}},{key:"addImageFile",value:function(e){var t=this,o=document.createElement("canvas"),a=o.getContext("2d");if(a){var i=new FileReader;i.onload=function(){var e=i.result;if(e){var n=new Image;n.src=e,n.onload=function(){o.width=n.width,o.height=n.height,a.clearRect(0,0,o.width,o.height),a.drawImage(n,0,0,o.width,o.height);for(var e=o.toDataURL("image/png"),i=atob(e.replace(/^.*,/,"")),r=new Uint8Array(i.length),l=0;l<i.length;l++)r[l]=i.charCodeAt(l);var s=new Blob([r.buffer],{type:"image/png"}),c=t.$refs.cropDialog1;"#face2"===t.uploadTarget&&(c=t.$refs.cropDialog2),c.show(s),c.show(s).then((function(e){var o=e;if(console.log(o),o.result){var a=t.$el.querySelector(t.uploadTarget),i=new Image;i.src=o.url,i.onload=function(){var e;null===(e=a.getContext("2d"))||void 0===e||e.drawImage(i,0,0,a.width,a.height)}}}))}}else alert("FileReader failed.")},i.readAsDataURL(e)}else alert("CanvasRenderingContext2D unsupported.")}},{key:"download",value:function(){var e=this;this.$store.dispatch("setOwner",{owner:this.owner}),this.$store.dispatch("setName",{name:this.name}),this.$store.dispatch("setCode",{code:this.code});var t=document.createElement("canvas"),o=t.getContext("2d");if(o){t.width=840,t.height=480;var a=new Image;a.src=this.baseUrl,a.onload=function(){o.drawImage(a,0,0),o.font="bold 22px sans-serif",o.fillStyle=e.ownerColor,o.fillText(e.owner,231,304),o.fillStyle=e.nameColor,o.fillText(e.name,348,175),o.fillStyle=e.codeColor,o.fillText(e.code,30,173),o.beginPath(),e.drawRoundRectImage(o,32,240,175,175,15),e.drawRoundRectImage(o,522,104,240,240,15),o.closePath(),o.clip(),o.drawImage(e.face1,32,240,175,175),o.drawImage(e.face2,522,104,240,240);for(var i=t.toDataURL("image/png"),n=atob(i.replace(/^.*,/,"")),r=new Uint8Array(n.length),l=0;l<n.length;l++)r[l]=n.charCodeAt(l);var s=new Blob([r.buffer],{type:"image/png"}),c=document.createElement("a");c.href=window.URL.createObjectURL(s),c.download="eccard.png",c.click()}}else alert("CanvasRenderingContext2D unsupported.")}},{key:"drawRoundRectImage",value:function(e,t,o,a,i,n){e.moveTo(t+n,o),e.lineTo(t+a-n,o),e.arc(t+a-n,o+n,n,1.5*Math.PI,0,!1),e.lineTo(t+a,o+i-n),e.arc(t+a-n,o+i-n,n,0,.5*Math.PI,!1),e.lineTo(t+n,o+i),e.arc(t+n,o+i-n,n,.5*Math.PI,Math.PI,!1),e.lineTo(t,o+n),e.arc(t+n,o+n,n,Math.PI,1.5*Math.PI,!1)}},{key:"styles",get:function(){return{"--ownerColor":this.ownerColor,"--nameColor":this.nameColor,"--codeColor":this.codeColor}}}]),o}(h["b"]);Se=Object(d["a"])([Object(h["a"])({components:{CropDialog:re}})],Se);var ke=Se,$e=ke,Ie=(o("af82"),Object(g["a"])($e,ye,xe,!1,null,"207b648a",null)),Oe=Ie.exports;v()(Ie,{VBtn:y["a"],VIcon:k["a"],VTextField:de["a"]});var Re=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("canvas",{attrs:{id:"base",width:"672px",height:"384ox"}}),o("canvas",{staticStyle:{top:"27px",left:"27px","border-radius":"90px"},attrs:{id:"face1",width:"152px",height:"152ox"}}),o("canvas",{staticStyle:{top:"113px",left:"351px","border-radius":"25px"},attrs:{id:"face2",width:"192px",height:"192ox"}}),o("div",{staticStyle:{width:"150px",top:"36px",left:"510px"},attrs:{id:"owner"}},[o("v-text-field",{staticClass:"owner-field",style:{color:e.ownerColor},attrs:{placeholder:"Owner","hide-details":"",color:e.ownerColor,dense:""},model:{value:e.owner,callback:function(t){e.owner=t},expression:"owner"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.ownerColor,expression:"ownerColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.ownerColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.ownerColor=t.target.value)}}})])],2)],1),o("div",{staticStyle:{width:"155px",top:"61px",left:"505px"},attrs:{id:"name"}},[o("v-text-field",{staticClass:"name-field",style:{color:e.nameColor},attrs:{placeholder:"Name","hide-details":"",color:e.nameColor,dense:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.nameColor,expression:"nameColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.nameColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.nameColor=t.target.value)}}})])],2)],1),o("div",{staticStyle:{width:"200px",top:"86px",left:"460px"},attrs:{id:"code"}},[o("v-text-field",{staticClass:"code-field",style:{color:e.codeColor},attrs:{placeholder:"Code","hide-details":"",color:e.codeColor,dense:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.codeColor,expression:"codeColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.codeColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.codeColor=t.target.value)}}})])],2)],1),o("v-btn",{staticStyle:{top:"90px",left:"85px"},attrs:{icon:"",absolute:"",color:"red lighten-1"},on:{click:function(t){return e.opneFile("#face1")}}},[o("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),o("v-btn",{staticStyle:{top:"193px",left:"430px"},attrs:{icon:"",absolute:"",color:"red lighten-1"},on:{click:function(t){return e.opneFile("#face2")}}},[o("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),o("CropDialog",{ref:"cropDialog1"}),o("CropDialog",{ref:"cropDialog2"})],1)},je=[],Fe=function(e){Object(s["a"])(o,e);var t=Object(c["a"])(o);function o(){var e;return Object(r["a"])(this,o),e=t.apply(this,arguments),e.uploadTarget="",e.baseUrl="/ECCard/img/EC_002.jpg",e.owner="",e.name="",e.code="",e.ownerColor="black",e.nameColor="black",e.codeColor="black",e}return Object(l["a"])(o,[{key:"changeStyle",value:function(){this.$el.querySelector(".theme--light.v-input.owner-field input").style.color=this.ownerColor,this.$el.querySelector(".theme--light.v-input.name-field input").style.color=this.nameColor,this.$el.querySelector(".theme--light.v-input.code-field input").style.color=this.codeColor}},{key:"mounted",value:function(){this.base=this.$el.querySelector("#base"),this.face1=this.$el.querySelector("#face1"),this.face2=this.$el.querySelector("#face2"),this.setBaseImage(),this.$router.app.$off("download"),this.$router.app.$on("download",this.download),this.owner=this.$store.state.owner,this.name=this.$store.state.name,this.code=this.$store.state.code}},{key:"setBaseImage",value:function(){var e=this,t=this.base.getContext("2d"),o=new Image;o.src=this.baseUrl,o.onload=function(){null===t||void 0===t||t.clearRect(0,0,e.base.width,e.base.height),null===t||void 0===t||t.drawImage(o,0,0,e.base.width,e.base.height)}}},{key:"opneFile",value:function(e){this.uploadTarget=e;var t=document.createElement("input");t.type="file",t.multiple=!0,t.addEventListener("change",this.addFile,!1),t.click()}},{key:"addFile",value:function(e){var t,o=e.target,a=o.files,i=Object(J["a"])(a);try{for(i.s();!(t=i.n()).done;){var n=t.value;console.log(n),n.type.match("image.*")&&this.addImageFile(n)}}catch(r){i.e(r)}finally{i.f()}}},{key:"addImageFile",value:function(e){var t=this,o=document.createElement("canvas"),a=o.getContext("2d");if(a){var i=new FileReader;i.onload=function(){var e=i.result;if(e){var n=new Image;n.src=e,n.onload=function(){o.width=n.width,o.height=n.height,a.clearRect(0,0,o.width,o.height),a.drawImage(n,0,0,o.width,o.height);for(var e=o.toDataURL("image/png"),i=atob(e.replace(/^.*,/,"")),r=new Uint8Array(i.length),l=0;l<i.length;l++)r[l]=i.charCodeAt(l);var s=new Blob([r.buffer],{type:"image/png"}),c=t.$refs.cropDialog1;"#face2"===t.uploadTarget&&(c=t.$refs.cropDialog2),c.show(s),c.show(s).then((function(e){var o=e;if(console.log(o),o.result){var a=t.$el.querySelector(t.uploadTarget),i=new Image;i.src=o.url,i.onload=function(){var e;null===(e=a.getContext("2d"))||void 0===e||e.drawImage(i,0,0,a.width,a.height)}}}))}}else alert("FileReader failed.")},i.readAsDataURL(e)}else alert("CanvasRenderingContext2D unsupported.")}},{key:"download",value:function(){var e=this;this.$store.dispatch("setOwner",{owner:this.owner}),this.$store.dispatch("setName",{name:this.name}),this.$store.dispatch("setCode",{code:this.code});var t=document.createElement("canvas"),o=t.getContext("2d");if(o){t.width=840,t.height=480;var a=new Image;a.src=this.baseUrl,a.onload=function(){null===o||void 0===o||o.drawImage(a,0,0),o.font="bold 22px sans-serif",o.fillStyle=e.ownerColor,o.fillText(e.owner,638,75),o.fillStyle=e.nameColor,o.fillText(e.name,631,107),o.fillStyle=e.codeColor,o.fillText(e.code,575,137),o.beginPath(),e.drawRoundRectImage(o,34,34,190,190,95),e.drawRoundRectImage(o,439,143,240,240,25),o.closePath(),o.clip(),o.drawImage(e.face1,34,34,190,190),o.drawImage(e.face2,439,143,240,240);for(var i=t.toDataURL("image/png"),n=atob(i.replace(/^.*,/,"")),r=new Uint8Array(n.length),l=0;l<n.length;l++)r[l]=n.charCodeAt(l);var s=new Blob([r.buffer],{type:"image/png"}),c=document.createElement("a");c.href=window.URL.createObjectURL(s),c.download="eccard.png",c.click()}}else alert("CanvasRenderingContext2D unsupported.")}},{key:"drawRoundRectImage",value:function(e,t,o,a,i,n){e.moveTo(t+n,o),e.lineTo(t+a-n,o),e.arc(t+a-n,o+n,n,1.5*Math.PI,0,!1),e.lineTo(t+a,o+i-n),e.arc(t+a-n,o+i-n,n,0,.5*Math.PI,!1),e.lineTo(t+n,o+i),e.arc(t+n,o+i-n,n,.5*Math.PI,Math.PI,!1),e.lineTo(t,o+n),e.arc(t+n,o+n,n,Math.PI,1.5*Math.PI,!1)}},{key:"styles",get:function(){return{"--ownerColor":this.ownerColor,"--nameColor":this.nameColor,"--codeColor":this.codeColor}}}]),o}(h["b"]);Fe=Object(d["a"])([Object(h["a"])({components:{CropDialog:re}})],Fe);var _e=Fe,Ue=_e,De=(o("2ed6"),Object(g["a"])(Ue,Re,je,!1,null,"60582901",null)),Te=De.exports;v()(De,{VBtn:y["a"],VIcon:k["a"],VTextField:de["a"]});var Le=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("canvas",{attrs:{id:"base",width:"672px",height:"384ox"}}),o("canvas",{staticStyle:{top:"192px",left:"26px","border-radius":"15px"},attrs:{id:"face1",width:"140px",height:"140ox"}}),o("canvas",{staticStyle:{top:"82px",left:"417px","border-radius":"15px"},attrs:{id:"face2",width:"193px",height:"193ox"}}),o("div",{staticStyle:{width:"155px",top:"205px",left:"185px"},attrs:{id:"owner"}},[o("v-text-field",{staticClass:"owner-field",style:{color:e.ownerColor},attrs:{placeholder:"Owner","hide-details":"",color:e.ownerColor},model:{value:e.owner,callback:function(t){e.owner=t},expression:"owner"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.ownerColor,expression:"ownerColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.ownerColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.ownerColor=t.target.value)}}})])],2)],1),o("div",{staticStyle:{width:"135px",top:"100px",left:"278px"},attrs:{id:"name"}},[o("v-text-field",{staticClass:"name-field",style:{color:e.nameColor},attrs:{placeholder:"Name","hide-details":"",color:e.nameColor},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.nameColor,expression:"nameColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.nameColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.nameColor=t.target.value)}}})])],2)],1),o("div",{staticStyle:{width:"185px",top:"100px",left:"22px"},attrs:{id:"code"}},[o("v-text-field",{staticClass:"code-field",style:{color:e.codeColor},attrs:{placeholder:"Code","hide-details":"",color:e.codeColor},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[o("template",{slot:"append-outer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.codeColor,expression:"codeColor"}],staticStyle:{width:"20px",height:"25px",margin:"0",padding:"0"},attrs:{type:"color"},domProps:{value:e.codeColor},on:{change:e.changeStyle,input:function(t){t.target.composing||(e.codeColor=t.target.value)}}})])],2)],1),o("v-btn",{staticStyle:{top:"245px",left:"78px"},attrs:{icon:"",absolute:"",color:"white"},on:{click:function(t){return e.opneFile("#face1")}}},[o("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),o("v-btn",{staticStyle:{top:"163px",left:"496px"},attrs:{icon:"",absolute:"",color:"white"},on:{click:function(t){return e.opneFile("#face2")}}},[o("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),o("CropDialog",{ref:"cropDialog1"}),o("CropDialog",{ref:"cropDialog2"}),o("loading",{attrs:{active:e.isLoading,opacity:.8,"can-cancel":!1,"is-full-page":!0}})],1)},Pe=[],Ee=(o("c975"),o("96cf"),o("1da1")),Ae=o("cd40"),Ve=o.n(Ae),qe=function(e){Object(s["a"])(o,e);var t=Object(c["a"])(o);function o(){var e;return Object(r["a"])(this,o),e=t.apply(this,arguments),e.blobs=[],e.parts=[],e.blobSize={},e.uploadTarget="",e.baseUrl="/ECCard/img/EC_001.jpg",e.gifUrl="/ECCard/gif.worker.js",e.owner="",e.name="",e.code="",e.ownerColor="black",e.nameColor="red",e.codeColor="white",e.isLoading=!1,e}return Object(l["a"])(o,[{key:"changeStyle",value:function(){this.$el.querySelector(".theme--light.v-input.owner-field input").style.color=this.ownerColor,this.$el.querySelector(".theme--light.v-input.name-field input").style.color=this.nameColor,this.$el.querySelector(".theme--light.v-input.code-field input").style.color=this.codeColor}},{key:"mounted",value:function(){this.base=this.$el.querySelector("#base"),this.face1=this.$el.querySelector("#face1"),this.face2=this.$el.querySelector("#face2"),this.setBaseImage(),this.$router.app.$off("download"),this.$router.app.$on("download",this.download),this.owner=this.$store.state.owner,this.name=this.$store.state.name,this.code=this.$store.state.code,this.changeStyle()}},{key:"setBaseImage",value:function(){var e=this,t=this.base.getContext("2d"),o=new Image;o.src=this.baseUrl,o.onload=function(){null===t||void 0===t||t.clearRect(0,0,e.base.width,e.base.height),null===t||void 0===t||t.drawImage(o,0,0,e.base.width,e.base.height)}}},{key:"opneFile",value:function(e){this.uploadTarget=e;var t=document.createElement("input");t.type="file",t.multiple=!0,t.addEventListener("change",this.addFile,!1),t.click()}},{key:"addFile",value:function(e){var t,o=e.target,a=o.files,i=Object(J["a"])(a);try{for(i.s();!(t=i.n()).done;){var n=t.value;console.log(n),n.type.match("image.*")?this.addImageFile(n):n.type.match("video.*")&&this.addVideoFile(n)}}catch(r){i.e(r)}finally{i.f()}}},{key:"addImageFile",value:function(e){var t=this,o=document.createElement("canvas"),a=o.getContext("2d");if(a){var i=new FileReader;i.onload=function(){var e=i.result;if(e){var n=new Image;n.src=e,n.onload=function(){o.width=n.width,o.height=n.height,a.clearRect(0,0,o.width,o.height),a.drawImage(n,0,0,o.width,o.height);for(var e=o.toDataURL("image/png"),i=atob(e.replace(/^.*,/,"")),r=new Uint8Array(i.length),l=0;l<i.length;l++)r[l]=i.charCodeAt(l);var s=new Blob([r.buffer],{type:"image/png"});t.showCropDialog(s)}}else alert("FileReader failed.")},i.readAsDataURL(e)}else alert("CanvasRenderingContext2D unsupported.")}},{key:"download",value:function(){var e=this;this.$store.dispatch("setOwner",{owner:this.owner}),this.$store.dispatch("setName",{name:this.name}),this.$store.dispatch("setCode",{code:this.code});var t=document.createElement("canvas"),o=t.getContext("2d");if(o){t.width=840,t.height=480,this.isLoading=!0;var a=new Image;a.src=this.baseUrl,a.onload=function(){o.drawImage(a,0,0),o.font="bold 22px sans-serif",o.fillStyle=e.ownerColor,o.fillText(e.owner,231,304),o.fillStyle=e.nameColor,o.fillText(e.name,348,175),o.fillStyle=e.codeColor,o.fillText(e.code,30,173),o.beginPath(),e.drawRoundRectImage(o,32,240,175,175,15),e.drawRoundRectImage(o,522,104,240,240,15),o.closePath(),o.clip(),o.drawImage(e.face1,32,240,175,175),e.parts=[],e.createParts(t,o)}}else alert("CanvasRenderingContext2D unsupported.")}},{key:"drawRoundRectImage",value:function(e,t,o,a,i,n){e.moveTo(t+n,o),e.lineTo(t+a-n,o),e.arc(t+a-n,o+n,n,1.5*Math.PI,0,!1),e.lineTo(t+a,o+i-n),e.arc(t+a-n,o+i-n,n,0,.5*Math.PI,!1),e.lineTo(t+n,o+i),e.arc(t+n,o+i-n,n,.5*Math.PI,Math.PI,!1),e.lineTo(t,o+n),e.arc(t+n,o+n,n,Math.PI,1.5*Math.PI,!1)}},{key:"createParts",value:function(e,t){var o=this;if(0!==this.blobs.length){var a=this.blobs.shift(),i=new Image;i.src=window.URL.createObjectURL(a),i.onload=function(){t.drawImage(i,0,(i.height-i.width)/2,i.width,i.width,522,104,240,240);for(var a=e.toDataURL("image/png"),n=atob(a.replace(/^.*,/,"")),r=new Uint8Array(n.length),l=0;l<n.length;l++)r[l]=n.charCodeAt(l);var s=new Blob([r.buffer],{type:"image/png"});o.parts.push(s),o.createParts(e,t)}}else this.downloadAnimeGif()}},{key:"downloadAnimeGif",value:function(){var e=this,t=new Ve.a({workers:2,quality:10,width:840,height:480,workerScript:this.gifUrl});t.on("finished",(function(t){e.isLoading=!1;var o=document.createElement("a");o.href=window.URL.createObjectURL(t),o.download="eccard.gif",o.target="_parent",o.click()})),this.shiftParts(t)}},{key:"shiftParts",value:function(e){var t=this;if(0!==this.parts.length){var o=this.parts.shift(),a=new Image;a.src=window.URL.createObjectURL(o),a.onload=function(){e.addFrame(a),t.shiftParts(e)}}else e.render()}},{key:"addVideoFile",value:function(e){var t=this,o=document.createElement("video");o.setAttribute("playsinline","true"),o.muted=!0,o.autoplay=!0;var a=document.createElement("canvas"),i=a.getContext("2d");if(i){this.isLoading=!0,o.addEventListener("loadeddata",(function(e){console.log(e.type),o.pause(),a.width=o.videoWidth,a.height=o.videoHeight;var n=0,r=[],l=o.duration;if(0==l)return t.isLoading=!1,void alert("duration error. duration = "+l);o.currentTime=l,o.addEventListener("timeupdate",function(){var e=Object(Ee["a"])(regeneratorRuntime.mark((function e(s){var c,d,h,u,p,m,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(console.log(s.type),i.drawImage(o,0,0),c=a.toDataURL("image/png"),d=atob(c.replace(/^.*,/,"")),h=new Uint8Array(d.length),u=0;u<d.length;u++)h[u]=d.charCodeAt(u);p=new Blob([h.buffer],{type:"image/png"}),r.push(p),n+=.5,n<l?o.currentTime=n:(t.blobs=r,t.isLoading=!1,m=t.$el.querySelector(t.uploadTarget),g=new Image,g.src=window.URL.createObjectURL(t.blobs[0]),g.onload=function(){var e;null===(e=m.getContext("2d"))||void 0===e||e.drawImage(g,0,(g.height-g.width)/2,g.width,g.width,0,0,m.width,m.height)});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.currentTime=0}));var n=window.navigator.userAgent.toLowerCase();if(-1!=n.indexOf("safari")){var r=new FileReader;r.onload=function(){var t=new Uint8Array(r.result),a=new Blob([t],{type:e.type});o.src=window.URL.createObjectURL(a)},r.readAsArrayBuffer(e)}else o.src=window.URL.createObjectURL(e)}else alert("CanvasRenderingContext2D unsupported.")}},{key:"showCropDialog",value:function(e){var t=this,o=this.$refs.cropDialog1;"#face2"===this.uploadTarget&&(o=this.$refs.cropDialog2),o.show(e),o.show(e).then((function(e){var o=e;if(console.log(o),o.result){t.blobSize=o.data,console.log(t.blobSize);var a=t.$el.querySelector(t.uploadTarget),i=new Image;i.src=o.url,i.onload=function(){var e;null===(e=a.getContext("2d"))||void 0===e||e.drawImage(i,0,0,a.width,a.height)}}}))}},{key:"styles",get:function(){return{"--ownerColor":this.ownerColor,"--nameColor":this.nameColor,"--codeColor":this.codeColor}}}]),o}(h["b"]);qe=Object(d["a"])([Object(h["a"])({components:{CropDialog:re}})],qe);var Be=qe,Ne=Be,Me=(o("80a2"),Object(g["a"])(Ne,Le,Pe,!1,null,"bf8ea2fc",null)),ze=Me.exports;v()(Me,{VBtn:y["a"],VIcon:k["a"],VTextField:de["a"]}),a["a"].use(A["a"]);var Ge=[{path:"/ECCard",name:"Home",component:G},{path:"/ECCard/Blue",name:"Blue",component:pe},{path:"/ECCard/Pink",name:"Pink",component:be},{path:"/ECCard/Red",name:"Red",component:Oe},{path:"/ECCard/Gold",name:"Gold",component:Te},{path:"/ECCard/RedAnime",name:"RedAnime",component:ze}],He=new A["a"]({mode:"history",base:"",routes:Ge}),We=He,Je=o("2f62"),Ye=o("0e44");a["a"].use(Je["a"]);var Ke=new Je["a"].Store({state:{owner:"",name:"",code:"",message:""},mutations:{setOwner:function(e,t){e.owner=t.owner},setName:function(e,t){e.name=t.name},setCode:function(e,t){e.code=t.code},setMessage:function(e,t){e.message=t.message}},actions:{setOwner:function(e,t){e.commit("setOwner",t)},setName:function(e,t){e.commit("setName",t)},setCode:function(e,t){e.commit("setCode",t)},setMessage:function(e,t){e.commit("setMessage",t)}},modules:{},plugins:[Object(Ye["a"])()]}),Qe=o("f309");a["a"].use(Qe["a"]);var Xe=new Qe["a"]({}),Ze=o("9062"),et=o.n(Ze);o("e40d");a["a"].config.productionTip=!1,a["a"].use(et.a),a["a"].component("loading",et.a),new a["a"]({router:We,store:Ke,vuetify:Xe,render:function(e){return e(P)}}).$mount("#app")},dc0d:function(e,t,o){},eecd:function(e,t,o){"use strict";o("dc0d")}});
//# sourceMappingURL=app.de795244.js.map